I"Œ<p>Tulisan ini hanyalah pengatar atau mengenalkan tentang â€œApa itu rails engineâ€ ke pembaca. Jika anda sudah tau atau mengenal bahkan menulis rails engine mungkin anda tidak akan mendapat sesuatu baru dari tulisan ini :)</p>

<p>Ok, langsung mulai saja.</p>

<p>Jadi, apa itu Rails engine? Kalo kita baca dokumentasi Railsnya ditulis begini:</p>

<blockquote>
  <p>Engines can be considered miniature applications that provide functionality to their host applications.</p>
</blockquote>

<p>Kira-kira kalo diartikan Rails engine itu adalah aplikasi rails â€œminiâ€ yang menyediakan fitur untuk aplikasi hostnya atau aplikasi <em>root</em> atau pemanggilnya.</p>

<p>Mungkin agak membingungkan, biar lebih jelas mari kita coba lihat cara implementasinya.</p>

<p>Misalnya kita membuat sebuah aplikasi kasir, dan kita ingin membuat fitur blog. Karena aplikasi blog ini nantinya tidak akan menyentuh fitur-fitur yang ada di core sistem, dan juga akan punya tim khusus untuk menghandle aplikasi blog ini kita bisa pisahkan aplikasi rails antara core sistem dengan aplikasi blog dengan konsep rails engine ini.</p>

<p>Mari buat aplikasi Railsnya terlebih dahulu:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> rails new rails-engine <span class="nt">-T</span> <span class="nt">--database</span><span class="o">=</span>mysql
</code></pre></div></div>

<p>Setelah terbuat, kita generate enginenya dengan perintah ini:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> rails plugin new blog <span class="nt">--mountable</span>
</code></pre></div></div>

<p>Setelah proses selesai, rails akan membuat mini rails di <code class="language-plaintext highlighter-rouge">/blog</code> kita bisa rapihkan foldernya sesuai docsnya jadi gini:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; mkdir engines
$&gt; mv blog engines/blog
</code></pre></div></div>

<p>Setelah rapih, sekarang include engine ini ke main appnya (host) dengan:</p>

<div class="language-rb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># config/routes.rb</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s1">'home#index'</span>
  <span class="n">mount</span> <span class="no">Blog</span><span class="o">::</span><span class="no">Engine</span> <span class="o">=&gt;</span> <span class="s1">'/blogs'</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Lalu mappingin juga routes di dalam enginenya:</p>
<div class="language-rb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># engines/blog/config/routes.rb</span>
<span class="no">Blog</span><span class="o">::</span><span class="no">Engine</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s1">'home#index'</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Sekarang hit halaman <code class="language-plaintext highlighter-rouge">/blogs</code>nya dari url, maka akan merenspon dari view <code class="language-plaintext highlighter-rouge">home#index</code> yang di dalam engine blognya.</p>

<p>Dengan rails engine, maka aplikasi rails menjadi terisolasi dan tidak menggangu core sistem. Untuk <em>people</em>-nya juga bisa menjadi lebih produktif karena proses onboarding dan scope aplikasi menjadi jelas.</p>

<p>Pola ini juga ada yang menyebutnya sebagai <em>Component-Based Rails Application</em>, jika anda tertarik lebih lanjut anda bisa membaca bukunya disini: <a href="https://cbra.info/">https://cbra.info/</a>. Buku itu menjelaskan bagaimana kita membuat dan merancang desain komponen hingga <em>technical things</em>-nya seperti bagaimana proses migrasi database dan strategi deploymentnya.</p>

<p>Jika ingin liat sample projeknya bisa disini yaa: <a href="https://github.com/sugar-for-pirate-king/rails-engines">https://github.com/sugar-for-pirate-king/rails-engines</a></p>

<hr />

<p>Sepertinya cukup sampai sini aja tulisan kali ini,</p>

<p>Makasih sudah membaca yaa :)</p>

:ET